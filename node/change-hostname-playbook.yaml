---

- name: Change hostname on router and nodes
  hosts: all
  tasks:
    - name: Change hostname
      become: true
      ansible.builtin.hostname:
        name: "{{ ansible_hostname }}"
    - name: Change hostname permanently
      become: true
      ansible.builtin.command:
        cmd: "hostnamectl set-hostname {{ ansible_hostname }}"
      changed_when: true
